/*! Greater Media Contests - v1.0.4
 * http://10up.com/
 * Copyright (c) 2015;
 * Licensed GPLv2+
 */
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},b=[].slice;!function(a,b){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)}(this,function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return e=c(d),l=a.call(d,"ontouchstart")>=0,h={horizontal:{},vertical:{}},i=1,k={},j="waypoints-context-id",o="resize.waypoints",p="scroll.waypoints",q=1,r="waypoints-waypoint-ids",s="waypoint",t="waypoints",f=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+i++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},a.data(j,this.id),k[this.id]=this,a.bind(p,function(){var a;return b.didScroll||l?void 0:(b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},d.setTimeout(a,c[t].settings.scrollThrottle))}),a.bind(o,function(){var a;return b.didResize?void 0:(b.didResize=!0,a=function(){return c[t]("refresh"),b.didResize=!1},d.setTimeout(a,c[t].settings.resizeThrottle))})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!l||a.vertical.oldScroll&&a.vertical.newScroll||c[t]("refresh"),c.each(a,function(a,d){var e,f,g;return g=[],f=d.newScroll>d.oldScroll,e=f?d.forward:d.backward,c.each(b.waypoints[a],function(a,b){var c,e;return d.oldScroll<(c=b.offset)&&c<=d.newScroll?g.push(b):d.newScroll<(e=b.offset)&&e<=d.oldScroll?g.push(b):void 0}),g.sort(function(a,b){return a.offset-b.offset}),f||g.reverse(),c.each(g,function(a,b){return b.options.continuous||a===g.length-1?b.trigger([e]):void 0})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var a,b,d,e=this;return d=c.isWindow(this.element),b=this.$element.offset(),this.doScroll(),a={horizontal:{contextOffset:d?0:b.left,contextScroll:d?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:d?0:b.top,contextScroll:d?0:this.oldScroll.y,contextDimension:d?c[t]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,d){var e,f,g,h,i;return e=d.options.offset,g=d.offset,f=c.isWindow(d.element)?0:d.$element.offset()[b.offsetProp],c.isFunction(e)?e=e.apply(d.element):"string"==typeof e&&(e=parseFloat(e),d.options.offset.indexOf("%")>-1&&(e=Math.ceil(b.contextDimension*e/100))),d.offset=f-b.contextOffset+b.contextScroll-e,d.options.onlyOnScroll&&null!=g||!d.enabled?void 0:null!==g&&g<(h=b.oldScroll)&&h<=d.offset?d.trigger([b.backward]):null!==g&&g>(i=b.oldScroll)&&i>=d.offset?d.trigger([b.forward]):null===g&&b.oldScroll>=d.offset?d.trigger([b.forward]):void 0})})},a.prototype.checkEmpty=function(){return c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([o,p].join(" ")),delete k[this.id]):void 0},a}(),g=function(){function a(a,b,d){var e,f;d=c.extend({},c.fn[s].defaults,d),"bottom-in-view"===d.offset&&(d.offset=function(){var a;return a=c[t]("viewportHeight"),c.isWindow(b.element)||(a=b.$element.height()),a-c(this).outerHeight()}),this.$element=a,this.element=a[0],this.axis=d.horizontal?"horizontal":"vertical",this.callback=d.handler,this.context=b,this.enabled=d.enabled,this.id="waypoints"+q++,this.offset=null,this.options=d,b.waypoints[this.axis][this.id]=this,h[this.axis][this.id]=this,e=null!=(f=a.data(r))?f:[],e.push(this.id),a.data(r,e)}return a.prototype.trigger=function(a){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,a),this.options.triggerOnce?this.destroy():void 0):void 0},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete h[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(a){var b,d;return(d=c(a).data(r))?(b=c.extend({},h.horizontal,h.vertical),c.map(d,function(a){return b[a]})):[]},a}(),n={init:function(a,b){var d;return null==b&&(b={}),null==(d=b.handler)&&(b.handler=a),this.each(function(){var a,d,e,h;return a=c(this),e=null!=(h=b.context)?h:c.fn[s].defaults.context,c.isWindow(e)||(e=a.closest(e)),e=c(e),d=k[e.data(j)],d||(d=new f(e)),new g(a,d,b)}),c[t]("refresh"),this},disable:function(){return n._invoke(this,"disable")},enable:function(){return n._invoke(this,"enable")},destroy:function(){return n._invoke(this,"destroy")},prev:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){return b>0?a.push(c[b-1]):void 0})},next:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){return b<c.length-1?a.push(c[b+1]):void 0})},_traverse:function(a,b,e){var f,g;return null==a&&(a="vertical"),null==b&&(b=d),g=m.aggregate(b),f=[],this.each(function(){var b;return b=c.inArray(this,g[a]),e(f,b,g[a])}),this.pushStack(f)},_invoke:function(a,b){return a.each(function(){var a;return a=g.getWaypointsByElement(this),c.each(a,function(a,c){return c[b](),!0})}),this}},c.fn[s]=function(){var a,d;return d=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],n[d]?n[d].apply(this,a):c.isFunction(d)?n.init.apply(this,arguments):c.isPlainObject(d)?n.init.apply(this,[null,d]):c.error(d?"The "+d+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},c.fn[s].defaults={context:d,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},m={refresh:function(){return c.each(k,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null!=(a=d.innerHeight)?a:e.height()},aggregate:function(a){var b,d,e;return b=h,a&&(b=null!=(e=k[c(a).data(j)])?e.waypoints:void 0),b?(d={horizontal:[],vertical:[]},c.each(d,function(a,e){return c.each(b[a],function(a,b){return e.push(b)}),e.sort(function(a,b){return a.offset-b.offset}),d[a]=c.map(e,function(a){return a.element}),d[a]=c.unique(d[a])}),d):[]},above:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return m._invoke("enable")},disable:function(){return m._invoke("disable")},destroy:function(){return m._invoke("destroy")},extendFn:function(a,b){return n[a]=b},_invoke:function(a){var b;return b=c.extend({},h.vertical,h.horizontal),c.each(b,function(b,c){return c[a](),!0})},_filter:function(a,b,d){var e,f;return(e=k[c(a).data(j)])?(f=[],c.each(e.waypoints[b],function(a,b){return d(e,b)?f.push(b):void 0}),f.sort(function(a,b){return a.offset-b.offset}),c.map(f,function(a){return a.element})):[]}},c[t]=function(){var a,c;return c=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],m[c]?m[c].apply(null,a):m.aggregate.call(null,c)},c[t].settings={resizeThrottle:100,scrollThrottle:30},e.load(function(){return c[t]("refresh")})})}).call(this),function(a){var b,c,d=a.event;b=d.special.debouncedresize={setup:function(){a(this).on("resize",b.handler)},teardown:function(){a(this).off("resize",b.handler)},handler:function(a,e){var f=this,g=arguments,h=function(){a.type="debouncedresize",d.dispatch.apply(f,g)};c&&clearTimeout(c),e?h():c=setTimeout(h,b.threshold)},threshold:250}}(jQuery);var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";!function(a){a.fn.imagesLoaded=function(b){function c(){var c=a(j),d=a(k);f&&(k.length?f.reject(h,c,d):f.resolve(h)),a.isFunction(b)&&b.call(e,h,c,d)}function d(b,d){b.src!==BLANK&&-1===a.inArray(b,i)&&(i.push(b),d?k.push(b):j.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),g&&f.notifyWith(a(b),[d,h,a(j),a(k)]),h.length===i.length&&(setTimeout(c),h.unbind(".imagesLoaded")))}var e=this,f=a.isFunction(a.Deferred)?a.Deferred():0,g=a.isFunction(f.notify),h=e.find("img").add(e.filter("img")),i=[],j=[],k=[];return a.isPlainObject(b)&&a.each(b,function(a,c){"callback"===a?b=c:f&&f[a](c)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(a){d(a.target,"error"===a.type)}).each(function(b,c){var e=c.src,f=a.data(c,"imagesLoaded");return f&&f.src===e?void d(c,f.isBroken):c.complete&&void 0!==c.naturalWidth?void d(c,0===c.naturalWidth||0===c.naturalHeight):void((c.readyState||c.complete)&&(c.src=BLANK,c.src=e))}):c(),f?f.promise(e):e}}(jQuery),function(a,b){var c,d=a(window),e=a("html, body"),f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},g=f[b.prefixed("transition")],h=b.csstransitions;a.fn.grid=function(b){var f=a(this),i=a("#wpadminbar").height()||0,j={minHeight:816,speed:200,easing:"ease",loadMore:null,loadMoreWaypointOffset:"150%",loadMoreUrl:null,loadedMore:null,previewLoaded:null};return j=a.extend(!0,{},j,b),f.each(function(){function b(){s.imagesLoaded(function(){l(!0),o(),m()})}function f(b){t=t.add(b),b.each(function(){var b=a(this);b.data({offsetTop:b.offset().top,height:b.height()})}),n(b)}function k(){var b;if(a.isFunction(j.loadMoreUrl)){if(B)return;if(b=j.loadMoreUrl(A),!b)return;B=!0,A++,u.addClass("loading"),a.get(b,function(b){var c=a(a.trim(b));c.length>0?(s.append(c),f(c),c.length>=z?(B=!1,u.removeClass("loading"),a.waypoints("refresh"),a.isFunction(j.loadedMore)&&j.loadedMore(c)):u.hide()):u.hide()})}}function l(b){t.each(function(){var c=a(this);c.data("offsetTop",c.offset().top),b&&c.data("height",c.outerHeight())})}function m(){n(t),d.on("debouncedresize",function(){x=0,w=-1,l(),o();var b=a.data(this,"preview");"undefined"!=typeof b&&q()}),u.length>0&&(u.on("click",function(){return k(),!1}),u.waypoint({offset:j.loadMoreWaypointOffset,triggerOnce:!1,handler:function(a){"down"===a&&k()}}),a.waypoints("refresh"))}function n(b){b.on("click","span.preview-close",function(){return q(),!1}),b.on("click","> a",function(){var b=a(this).parent();return v===b.index()?q():p(b),!1})}function o(){c={width:d.width(),height:d.height()}}function p(b){var c=a.data(this,"preview"),d=b.data("offsetTop");if(x=0,"undefined"!=typeof c){if(w===d)return c.update(b),!1;d>w&&(x=c.height),q()}w=d,c=a.data(this,"preview",new r(b)),c.open()}function q(){var b=a.data(this,"preview");v=-1,b&&b.close(),a.removeData(this,"preview")}function r(a){this.$item=a,this.expandedIdx=this.$item.index(),this.create(),this.update()}var s=a(this),t=s.children("li"),u=a(j.loadMore),v=-1,w=-1,x=0,y=70,z=t.length,A=1,B=!1;r.prototype={create:function(){this.$closePreview=a('<span class="preview-close"></span>'),this.$previewInner=a('<div class="preview-inner"></div>').append(this.$closePreview),this.$previewEl=a('<div class="preview"></div>').append(this.$previewInner),this.$item.append(this.getEl()),h&&this.setTransition()},update:function(b){var c,d,e,f;if(f=this,b&&(f.$item=b,f.getEl().appendTo(b)),-1!==v){var g=t.eq(v);g.removeClass("expanded"),f.$item.addClass("expanded"),f.positionPreview()}v=f.$item.index(),c=f.$previewInner,c.html(f.$closePreview),d=f.$item.children("a"),e=d.data("content"),e?(c.append(e),a.isFunction(j.previewLoaded)&&j.previewLoaded(f)):a.get(d.attr("href"),{ajax:"true"},function(b){d.data("content",b),c.append(b),a.isFunction(j.previewLoaded)&&j.previewLoaded(f)})},open:function(){setTimeout(a.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var b=this,c=function(){h&&a(this).off(g),b.$item.removeClass("expanded"),b.$previewEl.remove()};return setTimeout(a.proxy(function(){"undefined"!=typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var a=t.eq(this.expandedIdx);a.css("height",a.data("height")).on(g,c),h||c.call()},this),25),!1},calcHeight:function(){var a=c.height-this.$item.data("height")-y,b=c.height;a<j.minHeight&&(a=j.minHeight,b=j.minHeight+this.$item.data("height")+y),this.height=a,this.itemHeight=b},setHeights:function(){var a=this,b=function(){h&&a.$item.off(g),a.$item.addClass("expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(g,b),h||b.call()},positionPreview:function(){var a,b=this.$item.data("offsetTop"),d=this.$previewEl.offset().top-x;a=this.height+this.$item.data("height")+y<=c.height?b:this.height<c.height?d-(c.height-this.height):d,e.animate({scrollTop:a-i},j.speed)},setTransition:function(){this.$previewEl.css("transition","height "+j.speed+"ms "+j.easing),this.$item.css("transition","height "+j.speed+"ms "+j.easing)},getEl:function(){return this.$previewEl}},b()}),f}}(jQuery,Modernizr),function(a){var b,c,d=a(document),e=function(a,b){var c=parseInt(a.text().replace(/\D+/g,""));isNaN(c)&&(c=0),c+=b,c=c.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,").replace(/\..*/g,""),a.text(c)},f=function(c){var f=c.$previewInner,g=c.$item,h=g.find(".contest__submission--rating b"),i=!1;a.fn.cycle&&f.find(".cycle-slideshow").cycle(),f.find(".contest__submission--vote").click(function(){var c=a(this),d=c.find("i.fa"),f=d.attr("class");return i||(i=!0,d.attr("class","fa fa-spinner fa-spin"),a.post(b.data("vote"),{ugc:c.data("id")},function(a){i=!1,d.attr("class",f),a.success&&(g.addClass("voted"),e(h,1))})),!1}),f.find(".contest__submission--unvote").click(function(){var c=a(this),d=c.find("i.fa"),f=d.attr("class");return i||(i=!0,d.attr("class","fa fa-spinner fa-spin"),a.post(b.data("unvote"),{ugc:c.data("id")},function(a){i=!1,d.attr("class",f),a.success&&(g.removeClass("voted"),e(h,-1))})),!1}),d.trigger("contest:preview-loaded")},g=function(a){return b.data("infinite")+(a+1)+"/"},h=function(){b=a("#contest-form"),c=a(".contest__submissions--list"),d.on("submit","#contest-form form",function(){var c=a(this);if(!c.parsley||c.parsley().isValid()){var d=new FormData;c.find("input").each(function(){var b=this;"file"===b.type?a(this.files).each(function(a,c){d.append(b.name,c)}):"radio"===b.type||"checkbox"===b.type?b.checked&&d.append(b.name,b.value):d.append(b.name,b.value)}),c.find("textarea, select").each(function(){d.append(this.name,this.value)}),c.find("input, textarea, select, button").attr("disabled","disabled"),c.find("i.fa").show(),a.ajax({url:b.data("submit"),type:"post",data:d,processData:!1,contentType:!1,success:function(a){b.html(a)}})}return!1});var e=function(b){var c=a(".contest__restrictions");c.attr("class","contest__restrictions"),b&&c.addClass(b)},h=function(c){a.get(c,function(c){var d=null;c.success?(b.html(c.data.html),a(".type-contest.collapsed").removeClass("collapsed")):d=c.data.restriction,e(d)})};a(".contest__restriction--min-age-yes").click(function(){return h(b.data("confirm-age")),!1}),a(".contest__restriction--min-age-no").click(function(){return e("age-fails"),!1}),b.length>0&&h(b.data("load")),c.length>0&&c.grid({loadMore:".contest__submissions--load-more",previewLoaded:f,loadMoreUrl:g})};d.bind("pjax:end",h).ready(h)}(jQuery),document.addEventListener("DOMContentLoaded",function(){function a(){var a=document.createElement("input"),b=document.documentElement,c={},d=":)";return function(e){for(var f,g,h,i=0,j=e.length;j>i;i++)a.setAttribute("type",g=e[i]),f="text"!==a.type,f&&(a.value=d,a.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(g)&&void 0!==a.style.WebkitAppearance?(b.appendChild(a),h=document.defaultView,f=h.getComputedStyle&&"textfield"!==h.getComputedStyle(a,null).WebkitAppearance&&0!==a.offsetHeight,b.removeChild(a)):/^(search|tel)$/.test(g)||(f=/^(url|email)$/.test(g)?a.checkValidity&&a.checkValidity()===!1:a.value!==d)),c[e[i]]=!!f;return c}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var b=a();b.hasOwnProperty("date")&&!1!==b.date||(jQuery("input[type=date]").datetimepicker({timepicker:!1,format:"m/d/Y"}),jQuery("input[type=time]").datetimepicker({datepicker:!1,format:"g:i A",formatTime:"g:i A",allowTimes:["12:00 AM","12:30 AM","1:00 AM","1:30 AM","2:00 AM","2:30 AM","3:00 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM","7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM"]}))},!1);